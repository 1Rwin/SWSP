@model IEnumerable<SWSPapp.Models.StatisticBasicModel>
@using GridMvc.Html

@{
    ViewBag.Title = "Search";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Search</h2>

<hr />


<link href="@Url.Content("~/Scripts/gridmvc.min.js")" rel="stylesheet" />
<link href="@Url.Content("~/Content/Gridmvc.css")" rel="stylesheet" />

<div class="container">
    @Html.Grid(Model).Columns(col =>
            {
                col.Add(c => c.IdPlayer).Titled("Id").Filterable(false);
                col.Add(c => c.PlayerName).Titled("Name").Filterable(true);
                col.Add(c => c.Passing).Titled("Passing").Filterable(true);
                col.Add(c => c.Attack).Titled("Attack").Filterable(true);
                col.Add(c => c.Dribble).Titled("Dribble").Filterable(true);
                col.Add(c => c.Deffence).Titled("Deffence").Filterable(true);
                col.Add(c => c.Speed).Titled("Spped").Filterable(true);
                col.Add(c => c.Strength).Titled("Strength").Filterable(true);
                col.Add().Titled("Favorite").Encoded(false).Sanitized(false).SetWidth(30).RenderValueAs(x => Html.Raw(string.Format("<button type=\"button\" class=\"btn-link glyphicon glyphicon-heart-empty addFav\"")));
                col.Add().Titled("Favorite").Encoded(false).Sanitized(false).SetWidth(30).RenderValueAs(x => Html.Raw(string.Format("<button type=\"button\" class=\"btn-link glyphicon glyphicon-heart remFav\"")));
    //col.Add().Encoded(false).Sanitized(false).SetWidth(30).RenderValueAs(x => Html.ActionLink("Edit", "Edit", new { id = x.IdPlayer }));

})
</div>
@section scripts
{
    <script type="text/javascript">
        $(function () {
            $(".addFav").click(function () {
                var selector = this;
                var idCell = selector.parentElement.parentElement.childNodes[1].innerText;

                $.ajax({
                    url: '@Url.Action("AddFavorite","Home")',
                    type: "POST",
                    data: { idPlayer: idCell },
                    success: function (response) {
                        location.reload();
                    }
                });

            });

        });
    </script>

}